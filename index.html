<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Welcome to LemmaCraft | Math Proof Game</title>
        <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body>
        <h1 class="text-center text-7xl pt-16 font-bold font-mono">LemmaCraft</h1>
        <div class="grid grid-cols-4 gap-4 px-4 py-16 max-w-4xl mx-auto items-start" id="level-grid">
                <!-- Javascript injects HTML here -->
        </div>

        <script type="module">
                import { worlds } from "./worlds.js";

                const levelGridEl = document.getElementById('level-grid')

                let currentlyUp = true

                worlds.forEach((world, worldIndex) => {
                        
                        const levelComplete = world.levels.every((level, levelIndex) => localStorage.getItem(`${worldIndex+1}-${levelIndex+1}`) === 'complete')
                        
                        const worldEl = document.createElement('div')
                        
                        const linkBlockEl = document.createElement('a')
                        linkBlockEl.href = `${world.path}level-1-${world.levels[0].urlName}.html`
                        linkBlockEl.classList.add("block", levelComplete ? "bg-green-300" : (currentlyUp ? "bg-blue-300" : "bg-gray-300"), "text-center", "py-12" ,"rounded-xl", "hover:-translate-y-2")
                        linkBlockEl.innerHTML = `
                        <strong>World ${worldIndex+1}</strong>
                        <p>${world.name}</p>
                        `
                        worldEl.append(linkBlockEl)
                        
                        const levelListEl = document.createElement('ol')
                        levelListEl.classList.add('list-decimal', 'ml-10', 'mt-4')
                        world.levels.forEach((level, levelIndex) => {
                                const levelComplete = localStorage.getItem(`${worldIndex+1}-${levelIndex+1}`) === 'complete'
                                
                                const liEl = document.createElement('li')
                                liEl.classList.add('mb-2', 'pl-3')

                                const aEl = document.createElement('a')
                                aEl.href = `${world.path}level-${levelIndex+1}-${world.levels[levelIndex].urlName}.html`
                                aEl.innerText = level.name + (levelComplete ? '  âœ…' : '') 
                                aEl.classList.add('underline')

                                liEl.append(aEl)
                                levelListEl.append(liEl)
                        })
                        worldEl.append(levelListEl)                                
                                
                        levelGridEl.appendChild(worldEl)
                        currentlyUp &=levelComplete
                })
                
        </script>
</body>
</html>